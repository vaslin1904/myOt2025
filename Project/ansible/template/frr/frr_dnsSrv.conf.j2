!
! FRR for dnsSrv (gateway)

!
frr version
frr defaults traditional
hostname dnsSrv
log file /var/log/frr/frr.log

router bgp 65001
 bgp router-id 10.10.1.10
 no bgp default ipv4-unicast

 address-family ipv4 unicast
  network 0.0.0.0/0
  network 192.168.56.10/32
  network 10.10.1.10/32
 exit-address-family

 {% for host in groups['all'] | reject('equalto', 'dns') %}
 {% set ip = hostvars[host].ansible_all_ipv4_addresses | select('match', '^10\.10\.1\.') | first %}
 {% if ip %}
 neighbor {{ ip }} remote-as 65001
 neighbor {{ ip }} update-source 10.10.1.10
 address-family ipv4 unicast
  neighbor {{ ip }} activate
 exit-address-family
 {% endif %}
 {% endfor %}

!
line vty
!
end
